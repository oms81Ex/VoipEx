<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoipEx ìƒì„¸ ì„œë²„ ì•„í‚¤í…ì²˜</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1, h2, h3 {
            color: #2c3e50;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5em;
        }
        
        h2 {
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h3 {
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.3em;
            color: #34495e;
        }
        
        .architecture-diagram {
            margin: 30px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow-x: auto;
        }
        
        svg {
            width: 100%;
            height: auto;
            min-height: 400px;
        }
        
        .service-box {
            fill: #3498db;
            stroke: #2980b9;
            stroke-width: 2;
            rx: 5;
        }
        
        .client-box {
            fill: #9b59b6;
            stroke: #8e44ad;
            stroke-width: 2;
            rx: 5;
        }
        
        .data-box {
            fill: #e74c3c;
            stroke: #c0392b;
            stroke-width: 2;
            rx: 5;
        }
        
        .gateway-box {
            fill: #f39c12;
            stroke: #d68910;
            stroke-width: 2;
            rx: 5;
        }
        
        .media-box {
            fill: #2ecc71;
            stroke: #27ae60;
            stroke-width: 2;
            rx: 5;
        }
        
        .monitor-box {
            fill: #95a5a6;
            stroke: #7f8c8d;
            stroke-width: 2;
            rx: 5;
        }
        
        .text-label {
            fill: white;
            font-size: 14px;
            font-weight: 600;
            text-anchor: middle;
        }
        
        .port-label {
            fill: white;
            font-size: 11px;
            text-anchor: middle;
        }
        
        .arrow {
            stroke: #34495e;
            stroke-width: 2;
            marker-end: url(#arrowhead);
        }
        
        .arrow-websocket {
            stroke: #e74c3c;
            stroke-width: 2;
            stroke-dasharray: 5,5;
            marker-end: url(#arrowhead-ws);
        }
        
        .arrow-media {
            stroke: #2ecc71;
            stroke-width: 3;
            marker-end: url(#arrowhead-media);
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .service-detail {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            background-color: #fafafa;
        }
        
        .service-detail h4 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.2em;
        }
        
        .tech-stack {
            background-color: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .tech-stack strong {
            color: #1976d2;
        }
        
        .api-endpoints {
            background-color: #f3e5f5;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .api-endpoints code {
            background-color: #e1bee7;
            padding: 2px 5px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        .sequence-diagram {
            background-color: #fff3e0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .data-model {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        .data-model pre {
            background-color: #c8e6c9;
            padding: 10px;
            border-radius: 3px;
            overflow-x: auto;
        }
        
        .network-info {
            background-color: #fff8e1;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #3498db;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .flow-step {
            background-color: #f0f0f0;
            padding: 10px;
            margin: 5px 0;
            border-left: 4px solid #3498db;
            position: relative;
        }
        
        .flow-step::before {
            content: attr(data-step);
            position: absolute;
            left: -30px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #3498db;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }
        
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-box {
            width: 30px;
            height: 20px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>VoipEx ìƒì„¸ ì„œë²„ ì•„í‚¤í…ì²˜ ë° ì„¤ê³„ë„</h1>
        
        <h2>1. VoipEx ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸</h2>
        <div class="architecture-diagram">
            <svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
                <!-- Arrow markers -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
                    </marker>
                    <marker id="arrowhead-ws" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
                    </marker>
                    <marker id="arrowhead-media" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#2ecc71" />
                    </marker>
                </defs>
                
                <!-- Title -->
                <text x="600" y="30" style="font-size: 24px; font-weight: bold; text-anchor: middle; fill: #2c3e50;">VoipEx ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸</text>
                
                <!-- Client Layer Box -->
                <rect x="40" y="50" width="370" height="100" fill="none" stroke="#9b59b6" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
                <text x="50" y="70" style="font-size: 14px; font-weight: bold; fill: #9b59b6;">Client Layer</text>
                
                <!-- Client Components -->
                <rect x="60" y="80" width="150" height="50" class="client-box"/>
                <text x="135" y="105" class="text-label">React Web App</text>
                
                <rect x="240" y="80" width="150" height="50" class="client-box"/>
                <text x="315" y="105" class="text-label">Mobile App</text>
                
                <!-- Gateway Layer Box -->
                <rect x="40" y="180" width="370" height="120" fill="none" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
                <text x="50" y="200" style="font-size: 14px; font-weight: bold; fill: #f39c12;">Gateway Layer</text>
                
                <!-- Gateway Components -->
                <rect x="150" y="210" width="150" height="30" class="gateway-box"/>
                <text x="225" y="230" class="text-label">Nginx</text>
                
                <rect x="150" y="250" width="150" height="40" class="gateway-box"/>
                <text x="225" y="275" class="text-label">API Gateway</text>
                
                <!-- Service Layer Box -->
                <rect x="40" y="330" width="820" height="100" fill="none" stroke="#3498db" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
                <text x="50" y="350" style="font-size: 14px; font-weight: bold; fill: #3498db;">Service Layer</text>
                
                <!-- Service Components -->
                <rect x="60" y="360" width="120" height="50" class="service-box"/>
                <text x="120" y="385" class="text-label">Call Service</text>
                
                <rect x="200" y="360" width="120" height="50" class="service-box"/>
                <text x="260" y="385" class="text-label">User Service</text>
                
                <rect x="340" y="360" width="120" height="50" class="service-box"/>
                <text x="400" y="385" class="text-label">Auth Service</text>
                
                <rect x="480" y="360" width="120" height="50" class="service-box"/>
                <text x="540" y="375" class="text-label">Signaling</text>
                <text x="540" y="395" class="text-label">Service</text>
                
                <rect x="620" y="360" width="120" height="50" class="service-box"/>
                <text x="680" y="385" class="text-label">Media Service</text>
                
                <rect x="760" y="360" width="120" height="50" class="service-box"/>
                <text x="820" y="385" class="text-label">Room Service</text>
                
                <!-- Data Layer Box -->
                <rect x="40" y="460" width="370" height="120" fill="none" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
                <text x="50" y="480" style="font-size: 14px; font-weight: bold; fill: #e74c3c;">Data Layer</text>
                
                <!-- Data Components -->
                <rect x="100" y="500" width="100" height="60" class="data-box"/>
                <text x="150" y="530" class="text-label">MongoDB</text>
                
                <rect x="250" y="500" width="100" height="60" class="data-box"/>
                <text x="300" y="530" class="text-label">Redis</text>
                
                <!-- Media Processing Box -->
                <rect x="440" y="460" width="420" height="120" fill="none" stroke="#2ecc71" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
                <text x="450" y="480" style="font-size: 14px; font-weight: bold; fill: #2ecc71;">Media Processing</text>
                
                <!-- Media Components -->
                <rect x="480" y="500" width="160" height="60" class="media-box"/>
                <text x="560" y="520" class="text-label">Kurento Media</text>
                <text x="560" y="540" class="text-label">Server</text>
                
                <rect x="680" y="500" width="160" height="60" class="media-box"/>
                <text x="760" y="520" class="text-label">Coturn TURN</text>
                <text x="760" y="540" class="text-label">Server</text>
                
                <!-- Monitoring Box -->
                <rect x="890" y="180" width="280" height="250" fill="none" stroke="#95a5a6" stroke-width="2" stroke-dasharray="5,5" rx="10"/>
                <text x="900" y="200" style="font-size: 14px; font-weight: bold; fill: #95a5a6;">Monitoring</text>
                
                <!-- Monitoring Components -->
                <rect x="960" y="220" width="140" height="60" class="monitor-box"/>
                <text x="1030" y="250" class="text-label">Grafana</text>
                
                <rect x="960" y="340" width="140" height="60" class="monitor-box"/>
                <text x="1030" y="370" class="text-label">Prometheus</text>
                
                <!-- NAT ìˆœíšŒë¥¼ ìœ„í•œ STUN/TURN ì„œë²„ Note -->
                <rect x="650" y="600" width="200" height="50" fill="#fff8e1" stroke="#f39c12" stroke-width="1" rx="5"/>
                <text x="750" y="620" style="font-size: 12px; text-anchor: middle; fill: #333;">NAT ìˆœíšŒë¥¼ ìœ„í•œ</text>
                <text x="750" y="635" style="font-size: 12px; text-anchor: middle; fill: #333;">STUN/TURN ì„œë²„</text>
                
                <!-- Connections -->
                <!-- Client to Nginx -->
                <line x1="135" y1="130" x2="225" y2="210" class="arrow"/>
                <line x1="315" y1="130" x2="225" y2="210" class="arrow"/>
                
                <!-- Nginx to API Gateway -->
                <line x1="225" y1="240" x2="225" y2="250" class="arrow"/>
                
                <!-- Nginx to Signaling (WebSocket) -->
                <line x1="300" y1="230" x2="540" y2="360" class="arrow-websocket"/>
                <text x="420" y="280" style="font-size: 11px; fill: #e74c3c;">WebSocket</text>
                
                <!-- API Gateway to Services -->
                <line x1="225" y1="290" x2="120" y2="360" class="arrow"/>
                <line x1="225" y1="290" x2="260" y2="360" class="arrow"/>
                <line x1="225" y1="290" x2="400" y2="360" class="arrow"/>
                
                <!-- Services to Data Layer -->
                <line x1="120" y1="410" x2="150" y2="500" class="arrow"/>
                <line x1="260" y1="410" x2="150" y2="500" class="arrow"/>
                <line x1="400" y1="410" x2="150" y2="500" class="arrow"/>
                <line x1="400" y1="410" x2="300" y2="500" class="arrow"/>
                <line x1="540" y1="410" x2="300" y2="500" class="arrow"/>
                <line x1="680" y1="410" x2="300" y2="500" class="arrow"/>
                
                <!-- Media Service to Kurento -->
                <line x1="680" y1="410" x2="560" y2="500" class="arrow-media"/>
                
                <!-- Coturn connection line -->
                <line x1="760" y1="560" x2="750" y2="600" stroke="#f39c12" stroke-width="1" stroke-dasharray="3,3"/>
                
                <!-- Monitoring connections -->
                <line x1="1030" y1="280" x2="1030" y2="340" class="arrow"/>
                <line x1="960" y1="370" x2="820" y2="385" class="arrow"/>
                <line x1="960" y1="370" x2="680" y2="385" class="arrow"/>
                <line x1="960" y1="370" x2="540" y2="385" class="arrow"/>
            </svg>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-box" style="background-color: #9b59b6;"></div>
                <span>Client Layer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background-color: #f39c12;"></div>
                <span>Gateway Layer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background-color: #3498db;"></div>
                <span>Service Layer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background-color: #2ecc71;"></div>
                <span>Media Processing</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background-color: #e74c3c;"></div>
                <span>Data Layer</span>
            </div>
            <div class="legend-item">
                <div class="legend-box" style="background-color: #95a5a6;"></div>
                <span>Monitoring</span>
            </div>
        </div>
        
        <h2>2. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (í¬íŠ¸ ì •ë³´ í¬í•¨)</h2>
        <div class="architecture-diagram">
            <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
                <!-- Arrow markers -->
                <defs>
                    <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
                    </marker>
                    <marker id="arrowhead-ws2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
                    </marker>
                    <marker id="arrowhead-media2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#2ecc71" />
                    </marker>
                </defs>
                
                <!-- Client Layer -->
                <rect x="50" y="20" width="150" height="60" class="client-box"/>
                <text x="125" y="45" class="text-label">React Frontend</text>
                <text x="125" y="65" class="port-label">:80</text>
                
                <rect x="250" y="20" width="150" height="60" class="client-box"/>
                <text x="325" y="45" class="text-label">Mobile App</text>
                <text x="325" y="65" class="port-label">iOS/Android</text>
                
                <!-- Gateway Layer -->
                <rect x="150" y="120" width="150" height="60" class="gateway-box"/>
                <text x="225" y="145" class="text-label">Nginx</text>
                <text x="225" y="165" class="port-label">:80/:443</text>
                
                <!-- Service Layer -->
                <rect x="50" y="220" width="140" height="60" class="service-box"/>
                <text x="120" y="245" class="text-label">API Gateway</text>
                <text x="120" y="265" class="port-label">:3000</text>
                
                <rect x="210" y="220" width="140" height="60" class="service-box"/>
                <text x="280" y="245" class="text-label">Auth Service</text>
                <text x="280" y="265" class="port-label">:3001</text>
                
                <rect x="370" y="220" width="140" height="60" class="service-box"/>
                <text x="440" y="245" class="text-label">User Service</text>
                <text x="440" y="265" class="port-label">:3002</text>
                
                <rect x="530" y="220" width="140" height="60" class="service-box"/>
                <text x="600" y="245" class="text-label">Call Service</text>
                <text x="600" y="265" class="port-label">:3003</text>
                
                <rect x="50" y="320" width="140" height="60" class="service-box"/>
                <text x="120" y="345" class="text-label">Signaling Service</text>
                <text x="120" y="365" class="port-label">:3004</text>
                
                <rect x="210" y="320" width="140" height="60" class="service-box"/>
                <text x="280" y="345" class="text-label">Media Service</text>
                <text x="280" y="365" class="port-label">:3005</text>
                
                <rect x="370" y="320" width="140" height="60" class="service-box"/>
                <text x="440" y="345" class="text-label">Room Service</text>
                <text x="440" y="365" class="port-label">:3006</text>
                
                <!-- Media Processing -->
                <rect x="700" y="220" width="140" height="60" class="media-box"/>
                <text x="770" y="245" class="text-label">Kurento</text>
                <text x="770" y="265" class="port-label">:8888</text>
                
                <rect x="700" y="320" width="140" height="60" class="media-box"/>
                <text x="770" y="345" class="text-label">Coturn</text>
                <text x="770" y="365" class="port-label">:3478</text>
                
                <!-- Data Layer -->
                <rect x="50" y="450" width="140" height="60" class="data-box"/>
                <text x="120" y="475" class="text-label">MongoDB</text>
                <text x="120" y="495" class="port-label">:27017</text>
                
                <rect x="210" y="450" width="140" height="60" class="data-box"/>
                <text x="280" y="475" class="text-label">Redis</text>
                <text x="280" y="495" class="port-label">:6379</text>
                
                <!-- Monitoring -->
                <rect x="900" y="220" width="140" height="60" class="monitor-box"/>
                <text x="970" y="245" class="text-label">Prometheus</text>
                <text x="970" y="265" class="port-label">:9090</text>
                
                <rect x="900" y="320" width="140" height="60" class="monitor-box"/>
                <text x="970" y="345" class="text-label">Grafana</text>
                <text x="970" y="365" class="port-label">:3006</text>
                
                <!-- Connections -->
                <!-- Client to Nginx -->
                <line x1="125" y1="80" x2="225" y2="120" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="325" y1="80" x2="225" y2="120" class="arrow" marker-end="url(#arrowhead2)"/>
                
                <!-- Nginx to Services -->
                <line x1="225" y1="180" x2="120" y2="220" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="225" y1="180" x2="120" y2="320" class="arrow-websocket" marker-end="url(#arrowhead-ws2)"/>
                
                <!-- API Gateway to Services -->
                <line x1="120" y1="280" x2="280" y2="220" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="120" y1="280" x2="440" y2="220" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="120" y1="280" x2="600" y2="220" class="arrow" marker-end="url(#arrowhead2)"/>
                
                <!-- Services to Data -->
                <line x1="280" y1="280" x2="120" y2="450" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="280" y1="280" x2="280" y2="450" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="440" y1="280" x2="120" y2="450" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="600" y1="280" x2="120" y2="450" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="120" y1="380" x2="280" y2="450" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="280" y1="380" x2="280" y2="450" class="arrow" marker-end="url(#arrowhead2)"/>
                
                <!-- Media connections -->
                <line x1="280" y1="340" x2="700" y2="250" class="arrow-media" marker-end="url(#arrowhead-media2)"/>
                <line x1="120" y1="340" x2="700" y2="350" class="arrow-websocket" marker-end="url(#arrowhead-ws2)"/>
                
                <!-- Monitoring connections -->
                <line x1="670" y1="250" x2="900" y2="250" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="350" y1="350" x2="900" y2="350" class="arrow" marker-end="url(#arrowhead2)"/>
                <line x1="970" y1="320" x2="970" y2="280" class="arrow" marker-end="url(#arrowhead2)"/>
            </svg>
        </div>
        
        <div class="details-grid">
            <div class="service-detail">
                <h4>ğŸ”µ API Gateway</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Express.js + TypeScript</li>
                        <li>http-proxy-middleware</li>
                        <li>JWT validation</li>
                        <li>Rate limiting</li>
                        <li>Prometheus metrics</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>GET /health</code> - í—¬ìŠ¤ì²´í¬</li>
                        <li><code>* /api/auth/*</code> - Auth Service í”„ë¡ì‹œ</li>
                        <li><code>* /api/users/*</code> - User Service í”„ë¡ì‹œ</li>
                        <li><code>* /api/calls/*</code> - Call Service í”„ë¡ì‹œ</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ” Auth Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>MongoDB (ì‚¬ìš©ì ì¸ì¦ ì •ë³´)</li>
                        <li>Redis (ì„¸ì…˜ ê´€ë¦¬)</li>
                        <li>bcrypt (ë¹„ë°€ë²ˆí˜¸ í•´ì‹±)</li>
                        <li>jsonwebtoken</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>POST /register</code> - íšŒì›ê°€ì…</li>
                        <li><code>POST /login</code> - ë¡œê·¸ì¸</li>
                        <li><code>POST /logout</code> - ë¡œê·¸ì•„ì›ƒ</li>
                        <li><code>POST /refresh</code> - í† í° ê°±ì‹ </li>
                        <li><code>POST /verify</code> - í† í° ê²€ì¦</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ‘¤ User Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>MongoDB (ì‚¬ìš©ì í”„ë¡œí•„)</li>
                        <li>Redis (ì˜¨ë¼ì¸ ìƒíƒœ)</li>
                        <li>Multer (í”„ë¡œí•„ ì´ë¯¸ì§€)</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>GET /profile/:userId</code> - í”„ë¡œí•„ ì¡°íšŒ</li>
                        <li><code>PUT /profile</code> - í”„ë¡œí•„ ìˆ˜ì •</li>
                        <li><code>GET /contacts</code> - ì—°ë½ì²˜ ëª©ë¡</li>
                        <li><code>POST /contacts</code> - ì—°ë½ì²˜ ì¶”ê°€</li>
                        <li><code>GET /search</code> - ì‚¬ìš©ì ê²€ìƒ‰</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ“ Call Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>MongoDB (í†µí™” ê¸°ë¡)</li>
                        <li>Redis (í™œì„± í†µí™”)</li>
                        <li>UUID (í†µí™” ID ìƒì„±)</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>POST /calls/initiate</code> - í†µí™” ì‹œì‘</li>
                        <li><code>PUT /calls/:callId/end</code> - í†µí™” ì¢…ë£Œ</li>
                        <li><code>GET /calls/history</code> - í†µí™” ê¸°ë¡</li>
                        <li><code>GET /calls/active</code> - í™œì„± í†µí™”</li>
                        <li><code>GET /calls/stats</code> - í†µí™” í†µê³„</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ“¡ Signaling Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Socket.io</li>
                        <li>Redis (Pub/Sub)</li>
                        <li>JWT (ì†Œì¼“ ì¸ì¦)</li>
                        <li>WebRTC ì‹œê·¸ë„ë§</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>WebSocket ì´ë²¤íŠ¸:</strong>
                    <ul>
                        <li><code>offer</code> - SDP Offer ì „ì†¡</li>
                        <li><code>answer</code> - SDP Answer ì „ì†¡</li>
                        <li><code>ice-candidate</code> - ICE í›„ë³´ êµí™˜</li>
                        <li><code>call-user</code> - í†µí™” ìš”ì²­</li>
                        <li><code>accept-call</code> - í†µí™” ìˆ˜ë½</li>
                        <li><code>reject-call</code> - í†µí™” ê±°ì ˆ</li>
                        <li><code>end-call</code> - í†µí™” ì¢…ë£Œ</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ¥ Media Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>Mediasoup / simple-peer</li>
                        <li>Kurento Client</li>
                        <li>FFmpeg</li>
                        <li>node-media-server</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ê¸°ëŠ¥:</strong>
                    <ul>
                        <li>WebRTC ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬</li>
                        <li>ë¯¸ë””ì–´ íŒŒì´í”„ë¼ì¸ ìƒì„±</li>
                        <li>ë…¹ìŒ/ë…¹í™” ì²˜ë¦¬</li>
                        <li>íŠ¸ëœìŠ¤ì½”ë”©</li>
                        <li>í’ˆì§ˆ ì ì‘</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <h2>3. ê° ì„œë¹„ìŠ¤ ìƒì„¸ ì„¤ê³„</h2>
        
        <div class="details-grid">
            <div class="service-detail">
                <h4>ğŸ”µ API Gateway</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Express.js + TypeScript</li>
                        <li>http-proxy-middleware</li>
                        <li>JWT validation</li>
                        <li>Rate limiting</li>
                        <li>Prometheus metrics</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>GET /health</code> - í—¬ìŠ¤ì²´í¬</li>
                        <li><code>* /api/auth/*</code> - Auth Service í”„ë¡ì‹œ</li>
                        <li><code>* /api/users/*</code> - User Service í”„ë¡ì‹œ</li>
                        <li><code>* /api/calls/*</code> - Call Service í”„ë¡ì‹œ</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ” Auth Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>MongoDB (ì‚¬ìš©ì ì¸ì¦ ì •ë³´)</li>
                        <li>Redis (ì„¸ì…˜ ê´€ë¦¬)</li>
                        <li>bcrypt (ë¹„ë°€ë²ˆí˜¸ í•´ì‹±)</li>
                        <li>jsonwebtoken</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>POST /register</code> - íšŒì›ê°€ì…</li>
                        <li><code>POST /login</code> - ë¡œê·¸ì¸</li>
                        <li><code>POST /logout</code> - ë¡œê·¸ì•„ì›ƒ</li>
                        <li><code>POST /refresh</code> - í† í° ê°±ì‹ </li>
                        <li><code>POST /verify</code> - í† í° ê²€ì¦</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ‘¤ User Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>MongoDB (ì‚¬ìš©ì í”„ë¡œí•„)</li>
                        <li>Redis (ì˜¨ë¼ì¸ ìƒíƒœ)</li>
                        <li>Multer (í”„ë¡œí•„ ì´ë¯¸ì§€)</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>GET /profile/:userId</code> - í”„ë¡œí•„ ì¡°íšŒ</li>
                        <li><code>PUT /profile</code> - í”„ë¡œí•„ ìˆ˜ì •</li>
                        <li><code>GET /contacts</code> - ì—°ë½ì²˜ ëª©ë¡</li>
                        <li><code>POST /contacts</code> - ì—°ë½ì²˜ ì¶”ê°€</li>
                        <li><code>GET /search</code> - ì‚¬ìš©ì ê²€ìƒ‰</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ“ Call Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>MongoDB (í†µí™” ê¸°ë¡)</li>
                        <li>Redis (í™œì„± í†µí™”)</li>
                        <li>UUID (í†µí™” ID ìƒì„±)</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸:</strong>
                    <ul>
                        <li><code>POST /calls/initiate</code> - í†µí™” ì‹œì‘</li>
                        <li><code>PUT /calls/:callId/end</code> - í†µí™” ì¢…ë£Œ</li>
                        <li><code>GET /calls/history</code> - í†µí™” ê¸°ë¡</li>
                        <li><code>GET /calls/active</code> - í™œì„± í†µí™”</li>
                        <li><code>GET /calls/stats</code> - í†µí™” í†µê³„</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ“¡ Signaling Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Socket.io</li>
                        <li>Redis (Pub/Sub)</li>
                        <li>JWT (ì†Œì¼“ ì¸ì¦)</li>
                        <li>WebRTC ì‹œê·¸ë„ë§</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>WebSocket ì´ë²¤íŠ¸:</strong>
                    <ul>
                        <li><code>offer</code> - SDP Offer ì „ì†¡</li>
                        <li><code>answer</code> - SDP Answer ì „ì†¡</li>
                        <li><code>ice-candidate</code> - ICE í›„ë³´ êµí™˜</li>
                        <li><code>call-user</code> - í†µí™” ìš”ì²­</li>
                        <li><code>accept-call</code> - í†µí™” ìˆ˜ë½</li>
                        <li><code>reject-call</code> - í†µí™” ê±°ì ˆ</li>
                        <li><code>end-call</code> - í†µí™” ì¢…ë£Œ</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ¥ Media Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>Mediasoup / simple-peer</li>
                        <li>Kurento Client</li>
                        <li>FFmpeg</li>
                        <li>node-media-server</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ê¸°ëŠ¥:</strong>
                    <ul>
                        <li>WebRTC ì—”ë“œí¬ì¸íŠ¸ ê´€ë¦¬</li>
                        <li>ë¯¸ë””ì–´ íŒŒì´í”„ë¼ì¸ ìƒì„±</li>
                        <li>ë…¹ìŒ/ë…¹í™” ì²˜ë¦¬</li>
                        <li>íŠ¸ëœìŠ¤ì½”ë”©</li>
                        <li>í’ˆì§ˆ ì ì‘</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ  Room Service</h4>
                <div class="tech-stack">
                    <strong>ê¸°ìˆ  ìŠ¤íƒ:</strong>
                    <ul>
                        <li>Node.js + Express</li>
                        <li>Redis (ë£¸ ìƒíƒœ)</li>
                        <li>Socket.io (ì‹¤ì‹œê°„ ì´ë²¤íŠ¸)</li>
                    </ul>
                </div>
                <div class="api-endpoints">
                    <strong>ì£¼ìš” ê¸°ëŠ¥:</strong>
                    <ul>
                        <li>ê·¸ë£¹ í†µí™”ë£¸ ìƒì„±/ê´€ë¦¬</li>
                        <li>ì°¸ê°€ì ê¶Œí•œ ê´€ë¦¬</li>
                        <li>í™”ë©´ ê³µìœ  ì¡°ì •</li>
                        <li>ë£¸ ì„¤ì • ê´€ë¦¬</li>
                    </ul>
                </div>
            </div>
            
            <div class="service-detail">
                <h4>ğŸ“Š Monitoring Services</h4>
                <div class="tech-stack">
                    <strong>Prometheus:</strong>
                    <ul>
                        <li>ë©”íŠ¸ë¦­ ìˆ˜ì§‘</li>
                        <li>ì•Œë¦¼ ê·œì¹™ ì •ì˜</li>
                        <li>ì‹œê³„ì—´ ë°ì´í„° ì €ì¥</li>
                    </ul>
                    <strong>Grafana:</strong>
                    <ul>
                        <li>ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</li>
                        <li>ì‹œê°í™” ë° ì°¨íŠ¸</li>
                        <li>ì•Œë¦¼ ê´€ë¦¬</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <h2>4. ë°ì´í„° ëª¨ë¸</h2>
        
        <h3>4.1 MongoDB ìŠ¤í‚¤ë§ˆ</h3>
        
        <div class="data-model">
            <h4>Users Collection</h4>
            <pre>{
  _id: ObjectId,
  email: String (unique, indexed),
  password: String (bcrypt hashed),
  profile: {
    name: String,
    avatar: String (S3 URL),
    bio: String,
    phoneNumber: String
  },
  settings: {
    notifications: Boolean,
    privacy: {
      showOnlineStatus: Boolean,
      allowCalls: String (everyone/contacts/nobody)
    }
  },
  contacts: [ObjectId],
  blockedUsers: [ObjectId],
  createdAt: Date,
  updatedAt: Date
}</pre>
        </div>
        
        <div class="data-model">
            <h4>Calls Collection</h4>
            <pre>{
  _id: ObjectId,
  callId: String (unique, indexed),
  participants: [{
    userId: ObjectId,
    role: String (caller/callee),
    joinedAt: Date,
    leftAt: Date
  }],
  type: String (audio/video/screen),
  status: String (initiated/ringing/active/ended/failed),
  startTime: Date,
  endTime: Date,
  duration: Number (seconds),
  quality: {
    avgBitrate: Number,
    packetLoss: Number,
    jitter: Number
  },
  recording: {
    enabled: Boolean,
    url: String,
    size: Number
  },
  metadata: Object
}</pre>
        </div>
        
        <h3>4.2 Redis ë°ì´í„° êµ¬ì¡°</h3>
        
        <table>
            <thead>
                <tr>
                    <th>Key Pattern</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>TTL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>user:session:{userId}</code></td>
                    <td>String</td>
                    <td>JWT í† í°</td>
                    <td>24ì‹œê°„</td>
                </tr>
                <tr>
                    <td><code>user:status:{userId}</code></td>
                    <td>Hash</td>
                    <td>ì˜¨ë¼ì¸ ìƒíƒœ ì •ë³´</td>
                    <td>ì—†ìŒ</td>
                </tr>
                <tr>
                    <td><code>call:active:{callId}</code></td>
                    <td>Hash</td>
                    <td>í™œì„± í†µí™” ì •ë³´</td>
                    <td>1ì‹œê°„</td>
                </tr>
                <tr>
                    <td><code>user:socket:{userId}</code></td>
                    <td>String</td>
                    <td>Socket ID ë§¤í•‘</td>
                    <td>ì—°ê²° ì¤‘</td>
                </tr>
                <tr>
                    <td><code>room:participants:{roomId}</code></td>
                    <td>Set</td>
                    <td>ë£¸ ì°¸ê°€ì ëª©ë¡</td>
                    <td>2ì‹œê°„</td>
                </tr>
            </tbody>
        </table>
        
        <h2>5. í†µí™” í”Œë¡œìš° ìƒì„¸</h2>
        
        <h3>5.1 1:1 ìŒì„± í†µí™” ì‹œì‘ í”Œë¡œìš°</h3>
        
        <div class="sequence-diagram">
            <div class="flow-step" data-step="1">
                <strong>í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”</strong>
                <p>ë°œì‹ ìê°€ í†µí™” ë²„íŠ¼ í´ë¦­ â†’ getUserMedia() í˜¸ì¶œ â†’ ë§ˆì´í¬ ê¶Œí•œ ìš”ì²­</p>
            </div>
            
            <div class="flow-step" data-step="2">
                <strong>API ìš”ì²­</strong>
                <p>POST /api/calls/initiate â†’ JWT í† í° ê²€ì¦ â†’ ìˆ˜ì‹ ì ìƒíƒœ í™•ì¸</p>
            </div>
            
            <div class="flow-step" data-step="3">
                <strong>WebSocket ì—°ê²°</strong>
                <p>Socket.io ì—°ê²° â†’ ì¸ì¦ â†’ call-user ì´ë²¤íŠ¸ ë°œì†¡</p>
            </div>
            
            <div class="flow-step" data-step="4">
                <strong>ì‹œê·¸ë„ë§ ì„œë²„ ì²˜ë¦¬</strong>
                <p>ìˆ˜ì‹ ì ì†Œì¼“ ì°¾ê¸° â†’ incoming-call ì´ë²¤íŠ¸ ì „ì†¡ â†’ Redis ìƒíƒœ ì—…ë°ì´íŠ¸</p>
            </div>
            
            <div class="flow-step" data-step="5">
                <strong>ìˆ˜ì‹ ì ì•Œë¦¼</strong>
                <p>ë²¨ì†Œë¦¬ ì¬ìƒ â†’ í†µí™” ìˆ˜ë½/ê±°ì ˆ UI í‘œì‹œ</p>
            </div>
            
            <div class="flow-step" data-step="6">
                <strong>WebRTC í˜‘ìƒ</strong>
                <p>RTCPeerConnection ìƒì„± â†’ createOffer() â†’ setLocalDescription() â†’ offer ì „ì†¡</p>
            </div>
            
            <div class="flow-step" data-step="7">
                <strong>Answer ìƒì„±</strong>
                <p>ìˆ˜ì‹ ì createAnswer() â†’ setLocalDescription() â†’ answer ì „ì†¡</p>
            </div>
            
            <div class="flow-step" data-step="8">
                <strong>ICE í˜‘ìƒ</strong>
                <p>STUN ì„œë²„ ì¡°íšŒ â†’ ICE candidates ìˆ˜ì§‘ â†’ êµí™˜ â†’ ì—°ê²° í™•ë¦½</p>
            </div>
            
            <div class="flow-step" data-step="9">
                <strong>ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼</strong>
                <p>P2P ë˜ëŠ” TURN ë¦´ë ˆì´ â†’ ì˜¤ë””ì˜¤ íŒ¨í‚· ì „ì†¡ ì‹œì‘</p>
            </div>
            
            <div class="flow-step" data-step="10">
                <strong>í†µí™” í™œì„±í™”</strong>
                <p>Call Service ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ í†µí™” ì‹œê°„ ì¸¡ì • ì‹œì‘</p>
            </div>
        </div>
        
        <h2>6. ë„¤íŠ¸ì›Œí¬ êµ¬ì„±</h2>
        
        <div class="network-info">
            <h3>6.1 Docker ë„¤íŠ¸ì›Œí¬</h3>
            <table>
                <thead>
                    <tr>
                        <th>ë„¤íŠ¸ì›Œí¬</th>
                        <th>íƒ€ì…</th>
                        <th>ì„œë¹„ìŠ¤</th>
                        <th>ì„¤ëª…</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>voip-network</td>
                        <td>bridge</td>
                        <td>ëª¨ë“  ì„œë¹„ìŠ¤</td>
                        <td>ë‚´ë¶€ í†µì‹ ìš© ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬</td>
                    </tr>
                    <tr>
                        <td>host</td>
                        <td>host</td>
                        <td>Coturn</td>
                        <td>NAT ìˆœíšŒë¥¼ ìœ„í•œ í˜¸ìŠ¤íŠ¸ ë„¤íŠ¸ì›Œí¬</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <h3>6.2 í¬íŠ¸ ë§¤í•‘</h3>
        <table>
            <thead>
                <tr>
                    <th>ì„œë¹„ìŠ¤</th>
                    <th>ë‚´ë¶€ í¬íŠ¸</th>
                    <th>ì™¸ë¶€ í¬íŠ¸</th>
                    <th>í”„ë¡œí† ì½œ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Nginx</td>
                    <td>80, 443</td>
                    <td>80, 443</td>
                    <td>HTTP/HTTPS</td>
                </tr>
                <tr>
                    <td>API Gateway</td>
                    <td>3000</td>
                    <td>-</td>
                    <td>HTTP</td>
                </tr>
                <tr>
                    <td>Auth Service</td>
                    <td>3001</td>
                    <td>-</td>
                    <td>HTTP</td>
                </tr>
                <tr>
                    <td>User Service</td>
                    <td>3002</td>
                    <td>-</td>
                    <td>HTTP</td>
                </tr>
                <tr>
                    <td>Call Service</td>
                    <td>3003</td>
                    <td>-</td>
                    <td>HTTP</td>
                </tr>
                <tr>
                    <td>Signaling Service</td>
                    <td>3004</td>
                    <td>-</td>
                    <td>WebSocket</td>
                </tr>
                <tr>
                    <td>Media Service</td>
                    <td>3005</td>
                    <td>-</td>
                    <td>HTTP</td>
                </tr>
                <tr>
                    <td>MongoDB</td>
                    <td>27017</td>
                    <td>27017</td>
                    <td>TCP</td>
                </tr>
                <tr>
                    <td>Redis</td>
                    <td>6379</td>
                    <td>6379</td>
                    <td>TCP</td>
                </tr>
                <tr>
                    <td>Kurento</td>
                    <td>8888</td>
                    <td>8888</td>
                    <td>WebSocket</td>
                </tr>
                <tr>
                    <td>Coturn</td>
                    <td>3478</td>
                    <td>3478</td>
                    <td>UDP/TCP</td>
                </tr>
                <tr>
                    <td>Coturn (TLS)</td>
                    <td>5349</td>
                    <td>5349</td>
                    <td>UDP/TCP</td>
                </tr>
                <tr>
                    <td>Kurento RTP</td>
                    <td>40000-50000</td>
                    <td>40000-50000</td>
                    <td>UDP</td>
                </tr>
            </tbody>
        </table>
        
        <h2>7. ë³´ì•ˆ ì•„í‚¤í…ì²˜</h2>
        
        <h3>7.1 ì¸ì¦/ì¸ê°€ í”Œë¡œìš°</h3>
        
        <div class="architecture-diagram">
            <svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
                <!-- Client -->
                <rect x="50" y="50" width="100" height="50" class="client-box"/>
                <text x="100" y="80" class="text-label">Client</text>
                
                <!-- API Gateway -->
                <rect x="250" y="50" width="100" height="50" class="gateway-box"/>
                <text x="300" y="80" class="text-label">API GW</text>
                
                <!-- Auth Service -->
                <rect x="450" y="50" width="100" height="50" class="service-box"/>
                <text x="500" y="80" class="text-label">Auth</text>
                
                <!-- Redis -->
                <rect x="450" y="150" width="100" height="50" class="data-box"/>
                <text x="500" y="180" class="text-label">Redis</text>
                
                <!-- Service -->
                <rect x="650" y="50" width="100" height="50" class="service-box"/>
                <text x="700" y="80" class="text-label">Service</text>
                
                <!-- Flow arrows with labels -->
                <line x1="150" y1="75" x2="250" y2="75" class="arrow"/>
                <text x="175" y="70" font-size="12">1. Request + JWT</text>
                
                <line x1="350" y1="75" x2="450" y2="75" class="arrow"/>
                <text x="375" y="70" font-size="12">2. Verify</text>
                
                <line x1="500" y1="100" x2="500" y2="150" class="arrow"/>
                <text x="510" y="125" font-size="12">3. Check</text>
                
                <line x1="450" y1="75" x2="350" y2="75" class="arrow" stroke-dasharray="5,5"/>
                <text x="375" y="90" font-size="12">4. Valid</text>
                
                <line x1="550" y1="75" x2="650" y2="75" class="arrow"/>
                <text x="575" y="70" font-size="12">5. Forward</text>
                
                <line x1="650" y1="75" x2="150" y2="75" class="arrow" stroke-dasharray="5,5" 
                      marker-end="url(#arrowhead)" 
                      d="M 650 75 Q 400 250 150 75"/>
                <text x="400" y="200" font-size="12">6. Response</text>
            </svg>
        </div>
        
        <h3>7.2 ë³´ì•ˆ ê³„ì¸µ</h3>
        
        <table>
            <thead>
                <tr>
                    <th>ê³„ì¸µ</th>
                    <th>ë³´ì•ˆ ê¸°ìˆ </th>
                    <th>ëª©ì </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ë„¤íŠ¸ì›Œí¬</td>
                    <td>SSL/TLS, VPN</td>
                    <td>ì „ì†¡ ì¤‘ ì•”í˜¸í™”</td>
                </tr>
                <tr>
                    <td>ì• í”Œë¦¬ì¼€ì´ì…˜</td>
                    <td>JWT, OAuth 2.0</td>
                    <td>ì¸ì¦/ì¸ê°€</td>
                </tr>
                <tr>
                    <td>API</td>
                    <td>Rate Limiting, CORS</td>
                    <td>API ë³´í˜¸</td>
                </tr>
                <tr>
                    <td>ë¯¸ë””ì–´</td>
                    <td>DTLS-SRTP</td>
                    <td>ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¼ ì•”í˜¸í™”</td>
                </tr>
                <tr>
                    <td>ë°ì´í„°</td>
                    <td>ì•”í˜¸í™”, í•´ì‹±</td>
                    <td>ì €ì¥ ë°ì´í„° ë³´í˜¸</td>
                </tr>
            </tbody>
        </table>
        
        <h2>8. í™•ì¥ì„± ë° ì„±ëŠ¥ ìµœì í™”</h2>
        
        <h3>8.1 ìˆ˜í‰ í™•ì¥ ì „ëµ</h3>
        
        <div class="service-detail">
            <h4>ì„œë¹„ìŠ¤ë³„ ìŠ¤ì¼€ì¼ë§</h4>
            <ul>
                <li><strong>API Gateway:</strong> ë¡œë“œ ë°¸ëŸ°ì„œ ë’¤ì— ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ë°°ì¹˜</li>
                <li><strong>Auth Service:</strong> Stateless ì„¤ê³„ë¡œ ììœ ë¡œìš´ í™•ì¥</li>
                <li><strong>Signaling Service:</strong> Redis Pub/Subë¡œ ì¸ìŠ¤í„´ìŠ¤ ê°„ ë™ê¸°í™”</li>
                <li><strong>Media Service:</strong> ì§€ì—­ë³„ ë¶„ì‚° ë°°ì¹˜</li>
                <li><strong>MongoDB:</strong> ë³µì œì…‹ ë° ìƒ¤ë”©</li>
                <li><strong>Redis:</strong> í´ëŸ¬ìŠ¤í„° ëª¨ë“œ</li>
            </ul>
        </div>
        
        <h3>8.2 ìºì‹± ì „ëµ</h3>
        
        <table>
            <thead>
                <tr>
                    <th>ìºì‹œ ë ˆë²¨</th>
                    <th>ëŒ€ìƒ ë°ì´í„°</th>
                    <th>TTL</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>CDN</td>
                    <td>ì •ì  ìì› (JS, CSS, ì´ë¯¸ì§€)</td>
                    <td>1ë…„</td>
                </tr>
                <tr>
                    <td>Redis</td>
                    <td>ì„¸ì…˜, ì‚¬ìš©ì ìƒíƒœ</td>
                    <td>24ì‹œê°„</td>
                </tr>
                <tr>
                    <td>Application</td>
                    <td>ìì£¼ ì¡°íšŒë˜ëŠ” í”„ë¡œí•„</td>
                    <td>5ë¶„</td>
                </tr>
                <tr>
                    <td>Database</td>
                    <td>ì¿¼ë¦¬ ê²°ê³¼</td>
                    <td>1ë¶„</td>
                </tr>
            </tbody>
        </table>
        
        <h2>9. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…</h2>
        
        <h3>9.1 ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­</h3>
        
        <div class="details-grid">
            <div class="service-detail">
                <h4>ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­</h4>
                <ul>
                    <li>CPU ì‚¬ìš©ë¥ </li>
                    <li>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰</li>
                    <li>ë””ìŠ¤í¬ I/O</li>
                    <li>ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½</li>
                </ul>
            </div>
            
            <div class="service-detail">
                <h4>ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”íŠ¸ë¦­</h4>
                <ul>
                    <li>ìš”ì²­ ì‘ë‹µ ì‹œê°„</li>
                    <li>ì—ëŸ¬ìœ¨</li>
                    <li>í™œì„± ì—°ê²° ìˆ˜</li>
                    <li>í†µí™” í’ˆì§ˆ ì§€í‘œ</li>
                </ul>
            </div>
            
            <div class="service-detail">
                <h4>ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­</h4>
                <ul>
                    <li>ë™ì‹œ í†µí™” ìˆ˜</li>
                    <li>ì¼ì¼ í™œì„± ì‚¬ìš©ì</li>
                    <li>í‰ê·  í†µí™” ì‹œê°„</li>
                    <li>í†µí™” ì„±ê³µë¥ </li>
                </ul>
            </div>
        </div>
        
        <h3>9.2 ë¡œê·¸ ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸</h3>
        
        <div class="flow-step">
            ê° ì„œë¹„ìŠ¤ â†’ Filebeat â†’ Logstash â†’ Elasticsearch â†’ Kibana
        </div>
        
        <h2>10. ë°°í¬ ì „ëµ</h2>
        
        <h3>10.1 CI/CD íŒŒì´í”„ë¼ì¸</h3>
        
        <div class="sequence-diagram">
            <div class="flow-step" data-step="1">
                <strong>ì½”ë“œ ì»¤ë°‹</strong>
                <p>Git push â†’ GitHub webhook íŠ¸ë¦¬ê±°</p>
            </div>
            
            <div class="flow-step" data-step="2">
                <strong>ë¹Œë“œ</strong>
                <p>Docker ì´ë¯¸ì§€ ë¹Œë“œ â†’ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì‹¤í–‰</p>
            </div>
            
            <div class="flow-step" data-step="3">
                <strong>í…ŒìŠ¤íŠ¸</strong>
                <p>í†µí•© í…ŒìŠ¤íŠ¸ â†’ E2E í…ŒìŠ¤íŠ¸ â†’ ë³´ì•ˆ ìŠ¤ìº”</p>
            </div>
            
            <div class="flow-step" data-step="4">
                <strong>ìŠ¤í…Œì´ì§• ë°°í¬</strong>
                <p>ìŠ¤í…Œì´ì§• í™˜ê²½ ë°°í¬ â†’ ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸</p>
            </div>
            
            <div class="flow-step" data-step="5">
                <strong>í”„ë¡œë•ì…˜ ë°°í¬</strong>
                <p>Blue-Green ë°°í¬ â†’ í—¬ìŠ¤ì²´í¬ â†’ íŠ¸ë˜í”½ ì „í™˜</p>
            </div>
        </div>
        
        <h3>10.2 í™˜ê²½ë³„ êµ¬ì„±</h3>
        
        <table>
            <thead>
                <tr>
                    <th>í™˜ê²½</th>
                    <th>ìš©ë„</th>
                    <th>ì¸í”„ë¼</th>
                    <th>ë°ì´í„°</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Development</td>
                    <td>ê°œë°œ ë° í…ŒìŠ¤íŠ¸</td>
                    <td>Docker Compose</td>
                    <td>ë¡œì»¬ DB</td>
                </tr>
                <tr>
                    <td>Staging</td>
                    <td>í†µí•© í…ŒìŠ¤íŠ¸</td>
                    <td>Kubernetes (ì†Œê·œëª¨)</td>
                    <td>í…ŒìŠ¤íŠ¸ ë°ì´í„°</td>
                </tr>
                <tr>
                    <td>Production</td>
                    <td>ì‹¤ì œ ì„œë¹„ìŠ¤</td>
                    <td>Kubernetes (ëŒ€ê·œëª¨)</td>
                    <td>ì‹¤ì œ ë°ì´í„°</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>